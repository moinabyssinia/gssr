<html>
<head>
  <title> Surge Webmap</title>
  <!-- adding favicon -->
  <link rel="icon" type="image/png" href="https://img.icons8.com/color/32/000000/tsunami.png">

  <link rel="stylesheet" href="./leaflet/leaflet.css" />
  <script src="./leaflet/leaflet.js"></script>
    <script src="jquery-2.1.1.min.js"></script> 

  <style>
    
    body {
      background-color:lightcyan;
    }
    #map{ 
      height: 75%;
      width: 65%; 
      position: relative;
      top: 4%;
      bottom: 10%;
      left: 17.5%;
      right: 17.5%;
    }
    
    .starter {
      margin-top: 40;
      font-size: 1.25em;
      color:darkred;
      text-align: center;
    }

    h2, h3, h4 {
      margin-bottom: 0px;
    }


    #eraint {
      color: blueviolet;
    }
    #era20c {
      color: brown;
    }
    #twcr {
      color: green;
    }


  </style>
</head>
<body>

  <div class="starter">
    <h1>20th Century Global Storm Surge Reconstruction</h1>
    <h2>A database of global daily maximum storm surge time series</h2>
  </div>

  <div id="map"></div>

  <script>

  // initialize the map
  // in the setView the first two values are lat and lon
  // the last number is the level of zoom
  var map = L.map('map', {
    zoomDelta: 0.5,
    //maxBounds: bounds,
    //maxBoundsViscosity: 0.0
  }).setView([20, 0], 2);


  // load a tile layer
  L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community',

  }).addTo(map);

  // load GeoJSON from an external file
  $.getJSON("twCR_Era20c_EraIntData.geojson",function(data){
    var surgeIcon = L.icon({
      iconUrl: 'circle-48.png',
      iconSize: [13, 13], // size of the icon
    });
    
    // add GeoJSON layer to the map once the file is loaded
    L.geoJson(data, {
      pointToLayer: function(feature,latlng){
        var marker = L.marker(latlng,{icon: surgeIcon});
        marker.bindPopup( "<h2>Station Metadata:</h2>" + '<hr/>' +  "<h4>Station Name:</h4>  "  
        +feature.properties.tg + '<br/>' + "<h4>Lon/Lat:</h4>  "+ '[' +feature.properties.lon + ', ' + 
        feature.properties.lat +  ']' +'<hr/>' + 
        
          // ERA-Int
         '<a href= ' + feature.properties.eraintPath + '><h4>Daily Max Surge [CSV]</h4></a>' + 
         "<h4>Model Forcing:</h4>  " + "<span id = 'eraint'>ERA-Interim</span>  - " + feature.properties.yrEraint + " years" + '<br/>' + 
         '<hr/>' +
         
          // ERA20C
         '<a href= ' + feature.properties.era20cPath + '><h4>Daily Max Surge [CSV]</h4></a>' + 
         "<h4>Model Forcing:</h4>  " + "<span id = 'era20c'>ERA-20C</span>  - " + feature.properties.yrEra20c + " years" + '<br/>' +
         '<hr/>' +
         
        //  20thCR
         '<a href= ' + feature.properties.twcrPath + '><h4>Daily Max Surge [CSV]</h4></a>' +
         "<h4>Model Forcing:</h4>  " + "<span id = 'twcr'>20thCR</span>  - " + feature.properties.yrTwcr + " years" + '<br/>'
         );
        return marker;
      }
    }).addTo(map);
  });
 

  </script>
</body>
</html>