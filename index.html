<html>
<head>
  <title>20th Century Global Storm Surge Reconstruction</title>
  <link rel="stylesheet" href="./leaflet/leaflet.css" />
  <script src="./leaflet/leaflet.js"></script>
    <script src="jquery-2.1.1.min.js"></script> 
  <style>
    #map{ 
      height: 75%;
      width: 65%; 
      position: relative;
      top: 4%;
      bottom: 10%;
      left: 17.5%;
      right: 17.5%;
    }
    
    .starter {
      margin-top: 40;
      font-size: 1.25em;
      color:darkred;
      text-align: center;
    }

    h2, h3, h4 {
      margin-bottom: 0px;
    }


  </style>
</head>
<body>

  <div class="starter">
    <h1>20th Century Global Storm Surge Reconstruction</h1>
    <h2>A database of global daily maximum surge time series</h2>
  </div>

  <div id="map"></div>

  <script>

  // initialize the map
  // in the setView the first two values are lat and lon
  // the last number is the level of zoom
  var map = L.map('map', {
    zoomDelta: 0.5,
    //maxBounds: bounds,
    //maxBoundsViscosity: 0.0
  }).setView([20, 0], 2);


  // load a tile layer
  L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community',

  }).addTo(map);

  // load GeoJSON from an external file
  $.getJSON("eraint.geojson",function(data){
    var surgeIcon = L.icon({
      iconUrl: 'circle-48.png',
      iconSize: [13, 13], // size of the icon
    });
    
    // add GeoJSON layer to the map once the file is loaded
    L.geoJson(data, {
      pointToLayer: function(feature,latlng){
        var marker = L.marker(latlng,{icon: surgeIcon});
        marker.bindPopup( "<h2>Station Metadata:</h2>" + '<hr/>' +  "<strong>Station Name:</strong>  "+ '<br/>'  
        +feature.properties.tg + '<br/>' + "<h4>Longitude:</h4>  "+feature.geometry.coordinates[0]  
        + '<br/>' + "<h4>Latitude:</h4>  "+ feature.geometry.coordinates[1] + '<hr/>' + "<h3>ERA-Interim</h3>" +
        "<h4>Model trained on:</h4>  " + feature.properties.num_year + " years" + '<br/>'  +
        "<h4>Correlation:</h4>  "+ feature.properties.corrn + "<h4>RMSE (m):</h4>  "+ feature.properties.rmse + 
         "<h4>Daily Max Surge (m):</h4>  "+ '<a href= ' + feature.properties.path + '>CSV</a>');
        return marker;
      }
    }).addTo(map);
  });
 

  </script>
</body>
</html>